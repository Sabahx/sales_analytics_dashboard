# =============================================
# Sales Analytics Dashboard - Environment Configuration
# =============================================
# Copy this file to .env and update with your values
# Command: cp .env.example .env
# DO NOT commit .env to version control (already in .gitignore)

# =============================================
# Database Configuration (PostgreSQL)
# =============================================
# For local development, use localhost
# For production, use your cloud database (Neon, AWS RDS, etc.)

DB_HOST=localhost
DB_PORT=5432
DB_NAME=sales_analytics
DB_USER=postgres
DB_PASSWORD=your_password_here

# Example for Neon PostgreSQL (production):
# DB_HOST=your-project.neon.tech
# DB_PORT=5432
# DB_NAME=neondb
# DB_USER=neondb_owner
# DB_PASSWORD=your_neon_password

# =============================================
# API Configuration (FastAPI)
# =============================================
# Generate secure secret key with: openssl rand -hex 32

API_HOST=0.0.0.0
API_PORT=8000
API_SECRET_KEY=generate_a_secure_random_key_using_openssl_rand_hex_32
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================
# Application Settings
# =============================================

ENVIRONMENT=development
DEBUG=True
LOG_LEVEL=INFO

# For production deployment:
# ENVIRONMENT=production
# DEBUG=False
# LOG_LEVEL=WARNING

# =============================================
# Dashboard Configuration (Streamlit)
# =============================================

DASHBOARD_PORT=8501

# =============================================
# Email Configuration (SendGrid)
# =============================================
# Required for email verification feature
# Get your API key from: https://app.sendgrid.com/settings/api_keys

EMAIL_ENABLED=False
SENDGRID_API_KEY=your-sendgrid-api-key-here
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Sales Analytics Dashboard
EMAIL_VERIFICATION_URL=http://localhost:8000/api/auth/verify-email

# For production:
# EMAIL_ENABLED=True
# EMAIL_VERIFICATION_URL=https://yourdomain.com/api/auth/verify-email

# =============================================
# CORS Configuration (FastAPI)
# =============================================
# Comma-separated list of allowed origins for frontend apps

CORS_ORIGINS=http://localhost:3000,http://localhost:8501

# For production, add your frontend URLs:
# CORS_ORIGINS=https://yourdomain.com,https://dashboard.yourdomain.com

# =============================================
# Cache Configuration (Optional)
# =============================================

CACHE_TTL=600

# =============================================
# PgAdmin Configuration (Optional)
# =============================================
# For local database management UI

PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# =============================================
# Deployment Notes
# =============================================
#
# LOCAL DEVELOPMENT:
# 1. Copy this file: cp .env.example .env
# 2. Install PostgreSQL locally
# 3. Update DB_PASSWORD with your local PostgreSQL password
# 4. Generate API_SECRET_KEY: openssl rand -hex 32
# 5. Create database: createdb sales_analytics
# 6. Run SQL scripts: psql -d sales_analytics -f sql/create_tables.sql
# 7. Load data: python -m src.etl.load
# 8. Run API: python run_api.py
# 9. Run Dashboard: streamlit run dashboard.py
#
# RAILWAY DEPLOYMENT (API):
# 1. Go to Railway Dashboard → Web Service → Variables
# 2. Add all DB_* variables (use Neon PostgreSQL recommended)
# 3. Set ENVIRONMENT=production
# 4. Set DEBUG=False
# 5. Set LOG_LEVEL=WARNING
# 6. Generate new API_SECRET_KEY: openssl rand -hex 32
# 7. Configure EMAIL_* variables if using SendGrid
# 8. Add CORS_ORIGINS with your frontend URL
# 9. Railway will auto-deploy on git push
#
# STREAMLIT CLOUD DEPLOYMENT (Dashboard):
# 1. Go to Streamlit Cloud → App Settings → Secrets
# 2. Add all variables in TOML format (see .streamlit/secrets.toml.example)
# 3. Variables must use quotes: DB_HOST = "your-value"
# 4. Set ENVIRONMENT = "production"
# 5. Set DEBUG = "False"
# 6. Click "Reboot app" after saving secrets
#
# NEON POSTGRESQL SETUP (Recommended for Production):
# 1. Create free account at neon.tech
# 2. Create new project and database
# 3. Copy connection string from dashboard
# 4. Extract and set: DB_HOST, DB_NAME, DB_USER, DB_PASSWORD
# 5. Run SQL scripts to create tables
# 6. Upload data: python fast_neon_upload.py
# 7. Update Railway and Streamlit Cloud variables
# 8. Benefits: Stable, serverless, 3GB free tier, fast performance
#
# SECURITY CHECKLIST:
# - [ ] Change API_SECRET_KEY to secure random value (openssl rand -hex 32)
# - [ ] Update default admin password after first login
# - [ ] Set ENVIRONMENT=production for deployed environments
# - [ ] Set DEBUG=False in production
# - [ ] Use strong database password (16+ characters)
# - [ ] Enable EMAIL_ENABLED=True in production
# - [ ] Configure proper CORS_ORIGINS (don't use wildcards)
# - [ ] Enable database SSL in production (Neon has it by default)
# - [ ] Keep .env file excluded from git (check .gitignore)
# - [ ] Rotate API_SECRET_KEY periodically
# - [ ] Use environment-specific email verification URLs
#
